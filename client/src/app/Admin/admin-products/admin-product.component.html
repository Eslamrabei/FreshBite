<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h2 class="fw-bold text-primary">Products Management</h2>
    <p class="text-muted small mb-0">Manage your store inventory effectively.</p>
  </div>

  <button class="btn btn-primary shadow-sm" routerLink="/admin/products/create">
    <i class="bi bi-plus-lg me-1"></i> Create New Product
  </button>
</div>

<div class="card shadow-sm border-0"> <div class="card-body p-0">
    <table class="table table-hover table-striped align-middle mb-0"> <thead class="bg-light">
        <tr>
          <th class="ps-3">Id</th> <th>Image</th>
          <th>Name</th>
          <th>Price</th>
          <th>Brand</th>
          <th>Type</th>
          <th class="text-end pe-3">Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (product of products(); track product.id) {
        <tr>
          <td class="ps-3">{{ product.id }}</td>
          <td>
            <img
              [src]="product.pictureUrl || 'assets/images/placeholder.png'"
              alt="{{ product.name }}"
              style="height: 50px; width: 50px; object-fit: cover;"
              class="rounded border"
            />
          </td>
          <td class="fw-medium">{{ product.name }}</td>
          <td class="text-success fw-bold">{{ product.price | currency : 'EGP ' }}</td>
          <td>{{ product.brandName }}</td> <td>{{ product.typeName }}</td>

          <td class="text-end pe-3">
            <div class="btn-group shadow-sm" role="group">
              <button
                class="btn btn-sm btn-outline-primary"
                [routerLink]="['/admin/products/edit', product.id]"
                title="Edit Product"
              >
                <i class="bi bi-pencil-square"></i>
              </button>

              <button
                class="btn btn-sm btn-outline-danger"
                (click)="deleteProduct(product.id)"
                title="Delete Product"
              >
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </td>
        </tr>
        } @empty {
          <tr>
            <td colspan="7" class="text-center py-5 text-muted">
              <i class="bi bi-box-seam display-4 d-block mb-2"></i>
              No products found available in the inventory.
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>

@if (totalCount() > 0) {
<div class="d-flex justify-content-center mt-4">
  <nav aria-label="Page navigation">
    <ul class="pagination shadow-sm">
      <li class="page-item" [class.disabled]="pageIndex() === 1">
        <button class="page-link border-0" (click)="changePage(pageIndex() - 1)">
          <i class="bi bi-chevron-left"></i> Previous
        </button>
      </li>

      <li class="page-item active">
        <span class="page-link border-0 bg-primary">
          Page {{ pageIndex() }} of {{ totalPages }}
        </span>
      </li>

      <li class="page-item" [class.disabled]="pageIndex() * pageSize() >= totalCount()">
        <button class="page-link border-0" (click)="changePage(pageIndex() + 1)">
          Next <i class="bi bi-chevron-right"></i>
        </button>
      </li>
    </ul>
  </nav>
</div>
}
